# Client nginx configuration - serves built client bundle
server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    # CORS for development
    add_header 'Access-Control-Allow-Origin' '*' always;

    # SPA routing - all routes serve index.html
    location / {
        try_files $uri $uri/ /index.html;
        add_header 'Cache-Control' 'no-cache, no-store, must-revalidate';
    }

    # Hashed assets can be cached forever
    location /assets/ {
        try_files $uri =404;
        add_header 'Cache-Control' 'public, max-age=31536000, immutable';
    }

    # Health check
    location /health {
        access_log off;
        return 200 '{"status":"healthy"}';
        add_header 'Content-Type' 'application/json';
    }
}

